<!-- Contenedor principal -->
<div class="d-flex">

  <!-- Sidebar colapsable al hover -->
  <div class="sidebar" id="sidebar">
    <ul class="nav flex-column">

      <!-- Crear Usuario (solo visible si 'user:create' en permisos) -->
      {% if 'user:create' in permisos %}
      <li class="nav-item" title="Crear Usuario">
        <a href="{{ url_for('users_bp.crear_usuario') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/Crear_Usuario.webp') }}" width="24" class="me-2 icon">
          <span class="label">Crear Usuario</span>
        </a>
      </li>
      {% endif %}

      <!-- Ejemplo: Inscribir Estudiante -->
      
      <li class="nav-item" title="Inscribir Estudiante">
        <a href="#" id="btn-abrir-modal" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/inscripciones.webp') }}" width="24" class="me-2 icon">
          <span class="label">Inscribir Estudiante</span>
        </a>
      </li>

      
      <!-- Ejemplo: Crear Evento (solo si 'event:create' en permisos) -->
      <!-- Crear Evento-->
      {% if 'event:create' in permisos %}
      <li class="nav-item" title="Crear Evento">
        <a href="{{ url_for('eventos_bp.crear_evento') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/create_events.webp') }}" width="24" class="me-2 icon">
          <span class="label">Crear Convocatoria</span>
        </a>
      </li>
      {% endif %}

      <!-- Mis Eventos  -->
      {% if 'event:create' in permisos %}
      <li class="nav-item" title="Mis Eventos">
        <a href="{{ url_for('eventos_bp.mis_eventos') }}" class="nav-link d-flex align-items-center">
            <img src="{{ url_for('static', filename='img/sidebar/my_events.webp') }}" width="24" class="me-2 icon">
          <span class="label">Mis Convocatorias</span>
        </a>
      </li>
      {% endif %}

      <!-- Convocatorias disponibles (todos los usuarios) -->
      <li class="nav-item" title="Convocatorias disponibles">
        <a href="{{ url_for('admin_bp.convocatorias_disponibles') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/my_events.webp') }}" width="24" class="me-2 icon">
          <span class="label">Convocatorias disponibles</span>
        </a>
      </li>

      <!-- Editar Perfil Estudiantes -->
      {% if user.roles and user.roles[0].id == 4 %}
      <li class="nav-item" title="Editar Perfil">
        <a href="{{ url_for('estudiantes_bp.editar_perfil') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/user.webp') }}" width="24" class="me-2 icon">
          <span class="label">Editar Perfil</span>
        </a>
      </li>
      {% endif %}


      {% if user.roles and user.roles[0].id == 4 %}
        <li class="nav-item" title="Ver Inscripciones">
          <a href="{{ url_for('inscripciones_bp.ver_inscripciones_estudiante') }}" class="nav-link d-flex align-items-center">
            <img src="{{ url_for('static', filename='img/sidebar/my_events.webp') }}" width="24" class="me-2 icon">
            <span class="label">Mis Inscripciones</span>
          </a>
        </li>
        {% endif %}

      {% if 'tutor' in roles_usuario %}
      <li class="nav-item" title="Mis Delegaciones">
        <a href="{{ url_for('delegaciones_bp.ver_delegaciones') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/delegaciones.webp') }}" width="24" class="me-2 icon">
          <span class="label">Mis Delegaciones</span>
        </a>
      </li>
      {% endif %}

      <!-- Info del usuario (siempre disponible)-->
      <li class="nav-item" title="Mi informacion">
        <a href="{{ url_for('info_bp.Mi_Informacion') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/Mi_Informacion.webp') }}" width="24" class="me-2 icon">
        <span class="label">Mi Información</span>
        </a>
      </li>


      <!-- Perfil/Cerrar Sesión -->
      <li class="nav-item mt-auto" title="Perfil">
        <a href="{{ url_for('admin_bp.logout') }}" class="nav-link d-flex align-items-center">
          <img src="{{ url_for('static', filename='img/sidebar/user.webp') }}" width="24" class="me-2 icon">
          <span class="label">Cerrar sesión</span>
        </a>
      </li>
      <!-- Info del usuario -->
      <li class="nav-item mt-3 px-3 text-center">
        <span class="label d-block">
          <div class="text-muted small" style="line-height: 1.4;">
            <strong>{{ user.first_name }} {{ user.last_name }}</strong><br>
            <span>{{ user.email }}</span><br>
            {% if user.roles %}
              <em>Rol: {{ user.roles[0].name }}</em>
            {% else %}
              <em>Sin rol</em>
            {% endif %}
          </div>
        </span>
      </li>

    </ul>
  </div>

  <!-- Contenido principal al lado del sidebar -->
  <div class="flex-grow-1 p-4" id="main-content">
    {% block dashboard_content %}{% endblock %}
  </div>

</div>
